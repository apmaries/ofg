<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Error handling -->
    <script>
      console.log("{am} Setting up error handler");
      // Define a global error handler function
      window.onerror = function (message, source, lineno, colno, error) {
        console.error("{am} An error occurred:", message);
        console.error("{am} Source:", source);
        console.error("{am} Line:", lineno);
        console.error("{am} Column:", colno);
        console.error("{am} Error object:", error);
      };
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPA Login App</title>
    <script>
      console.log("{am} index page loaded");
    </script>
  </head>
  <body>
    <h1>SPA Login App</h1>
    <div id="content"></div>
    <script>
      console.log("{am} scripts loading...");
    </script>
    <script src="https://sdk-cdn.mypurecloud.com/javascript/latest/purecloud-platform-client-v2.min.js"></script>
    <script type="module">
      import { start, uapi } from "./clientHandler.js";
      console.log("{am} clientHandler loaded");

      start()
        .then(() => {
          // You can now use uapi here
          console.log("{am} uapi is ready to use:", uapi);
        })
        .catch((err) => {
          console.error("{am} Error during start:", err);
        });
    </script>
    <script>
      console.log("{am} scripts loaded!");
    </script>
  </body>
</html>
